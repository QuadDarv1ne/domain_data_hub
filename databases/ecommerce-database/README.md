# Создание базы данных для продуктового магазина (по франшизе)

### Структура БД

```
+--------------------+
|       Users        |
+--------------------+
| user_id (PK)       |
| username (UNIQUE)  |
| email (UNIQUE)     |
| password           |
| first_name         |
| last_name          |
| phone              |
| address            |
| role               |
+--------------------+
          |
          |
          |
          v
+--------------------+             +--------------------+             +--------------------+
|     Products       |-----------> |     Categories     | <-----------|      Suppliers     |
+--------------------+             +--------------------+             +--------------------+
| product_id (PK)    |             | category_id (PK)   |             | supplier_id (PK)   |
| name               |             | name (UNIQUE)      |             | name (UNIQUE)      |
| description        |             | description        |             | contact_person     |
| price              |             +--------------------+             | phone              |
| stock_quantity     |                                           +----| email              |
| category_id (FK)   |                                           |    | address            |
| supplier_id (FK)   |                                           |    +--------------------+
| image_url          |                                           |
+--------------------+                                           |
          |                                                      |
          |                                                      +--------------+
          v                                                                     v
+--------------------+            +--------------------+             +--------------------+
|       Orders       |            |    Order_Items     |             |      Payments      |
+--------------------+            +--------------------+             +--------------------+
| order_id (PK)      |            | order_item_id (PK) |             | payment_id (PK)    |
| user_id (FK)       |            | order_id (FK)      | <-----------| order_id (FK)      |
| total_price        |            | product_id (FK)    |             | payment_date       |
| order_date         |            | quantity           |             | amount             |
| status             |            | total_price        |             | payment_method     |
| shipping_address   |            +--------------------+             | payment_status     |
+--------------------+                                               +--------------------+
          ^
          |
          |
          |
+--------------------+
|       Users        |
+--------------------+
| user_id (PK)       |
| username (UNIQUE)  |
| email (UNIQUE)     |
| password           |
| name               |
| surname            |
| patronomic         |
| phone              |
| address            |
| role               |
+--------------------+
```

### Объяснение структуры

#### 1. Таблица Users (Пользователи)

Эта таблица хранит информацию о зарегистрированных пользователях, которые могут делать заказы.

**Поля:**

- `user_id (PK)` — уникальный идентификатор пользователя.
- `username` — уникальное имя пользователя для входа в систему.
- `email` — уникальный адрес электронной почты.
- `password` — зашифрованный пароль для входа.
- `name`, `suname`, `patronomic` — имя и фамилия пользователя.
- `phone` — номер телефона.
- `address` — адрес пользователя.
- `role` — роль пользователя (например, администратор или клиент).

#### 2. Таблица Categories (Категории)

Содержит категории товаров, например, "Электроника", "Одежда".

**Поля:**
- `category_id (PK)` — уникальный идентификатор категории.
- `name` — название категории.
- `description` — описание категории.

#### 3. Таблица Suppliers (Поставщики)

Эта таблица содержит данные о компаниях, которые поставляют товары.

**Поля:**
- `supplier_id (PK)` — уникальный идентификатор поставщика.
- `name` — название компании поставщика.
- `contact_person` — контактное лицо.
- `phone`, `email`, `address` — контактные данные поставщика.

#### 4. Таблица Products (Продукты)

Содержит список товаров, которые продаются в магазине.

**Поля:**
- `product_id (PK)` — уникальный идентификатор продукта.
- `name` — название продукта.
- `description` — описание товара.
- `price` — стоимость продукта.
- `stock_quantity` — количество товара на складе.
- `category_id (FK)` — ссылка на таблицу Categories, к какой категории принадлежит продукт.
- `supplier_id (FK)` — ссылка на таблицу Suppliers, какой поставщик предоставил продукт.
- `image_url` — URL-адрес изображения товара.

#### 5. Таблица Orders (Заказы)

Хранит заказы, которые создают пользователи.

**Поля:**
- `order_id (PK)` — уникальный идентификатор заказа.
- `user_id (FK)` — ссылка на пользователя, который создал заказ.
- `total_price` — общая стоимость заказа.
- `order_date` — дата оформления заказа.
- `status` — статус заказа (например, "В обработке", "Доставлен").
- `shipping_address` — адрес доставки.

#### 6. Таблица Order_Items (Позиции заказа)

Хранит информацию о товарах, включённых в заказ.

**Поля:**
- `order_item_id (PK)` — уникальный идентификатор позиции.
- `order_id (FK)` — ссылка на конкретный заказ.
- `product_id (FK)` — ссылка на продукт, который был заказан.
- `quantity` — количество данного товара.
- `total_price` — стоимость товара в заказе (цена продукта × количество).

#### 7. Таблица Payments (Платежи)

Отражает оплату заказов.

**Поля:**
- `payment_id (PK)` — уникальный идентификатор платежа.
- `order_id (FK)` — ссылка на заказ, за который был сделан платёж.
- `payment_date` — дата платежа.
- `amount` — сумма платежа.
- `payment_method` — метод оплаты (например, карта, наличные).
- `payment_status` — статус платежа (например, "Оплачен", "Ожидает оплаты").

#### Связи между таблицами:

**Users ↔ Orders:**
Один пользователь может создать много заказов.
Каждый заказ связан с конкретным пользователем.

**Categories ↔ Products:**
Одна категория может включать много продуктов.
Каждый продукт принадлежит одной категории.

**Suppliers ↔ Products:**
Один поставщик может поставлять много продуктов.
Каждый продукт связан с одним поставщиком.

**Orders ↔ Order_Items:**
Один заказ может содержать много позиций (товаров).
Каждая позиция относится к одному заказу.

**Products ↔ Order_Items:**
Один продукт может быть включён в много заказов.
Каждая позиция заказа связана с конкретным продуктом.

**Orders ↔ Payments:**
Один заказ может быть оплачен (или частично оплачен) через несколько платежей.
Каждый платёж относится к одному заказу.

Эта структура обеспечивает чёткие связи и нормализованное хранение данных, минимизируя избыточность.

**Автор:** Дуплей Максим Игоревич

**Дата:** 17.11.2024
