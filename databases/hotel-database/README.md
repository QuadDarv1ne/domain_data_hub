# Создание базы данных для гостиничного бизнеса

### Структура БД

```
+--------------------+           +---------------------+
|      Guests        |           |       Rooms         |
+--------------------+           +---------------------+
| guest_id (PK)      |<-------+  | room_id (PK)        |
| name               |        |  | room_number (UNIQUE)|
| surname            |        |  | room_type           |
| patronymic         |        |  | capacity            |
| email (UNIQUE)     |        |  | price_per_night     |
| address            |        |  | status              |
| passport_no        |        |  | created_at          |
| phone (UNIQUE)     |        |  | updated_at          |
| created_at         |        |  +---------------------+
| updated_at         |        |
+--------------------+        |
                              | 1                   1
                              |      +--------------------+
                              +------|      Bookings      |
                                     +--------------------+
                                     | booking_id (PK)    |
                                     | guest_id (FK)      |
                                     | room_id (FK)       |
                                     | check_in_date      |
                                     | check_out_date     |
                                     | number_of_guests   |
                                     | total_amount       |
                                     | payment_status     |
                                     | booking_status     |
                                     | created_at         |
                                     | updated_at         |
                                     +--------------------+
                                             |
                                             | 1
                                             |
                                  +----------+------------+
                                  |                       |
                           +------+------------+  +-------+---------+
                           |   Transactions    |  |   ServiceUsage  |
                           +-------------------+  +-----------------+
                           | transaction_id    |  | usage_id (PK)   |
                           | booking_id (FK)   |  | booking_id (FK) |
                           | transaction_date  |  | service_id (FK) |
                           | amount            |  | quantity        |
                           | payment_method    |  | total_cost      |
                           | transaction_status|  | usage_date      |
                           | created_at        |  | created_at      |
                           | updated_at        |  | updated_at      |
                           +-------------------+  +-----------------+
                                                          |
                                                          |
                                                          | 1
                                                          |
                                                   +------+-------+
                                                   |   Services   |
                                                   +--------------+
                                                   | service_id   |
                                                   | service_name |
                                                   | description  |
                                                   | service_price|
                                                   | created_at   |
                                                   | updated_at   |
                                                   +--------------+
```

### Структура базы данных гостиницы

### 1. Таблица `Guests`
Хранит информацию о гостях.

| Поле            | Тип              | Описание                          |
|-----------------|------------------|-----------------------------------|
| `guest_id` (PK) | INTEGER          | Уникальный идентификатор гостя    |
| `name`          | VARCHAR(100)     | Имя гостя                         |
| `surname`       | VARCHAR(100)     | Фамилия гостя                     |
| `patronymic`    | VARCHAR(100)     | Отчество гостя                    |
| `phone`         | VARCHAR(20)      | Номер телефона                    |
| `email`         | VARCHAR(100)     | Электронная почта                 |
| `address`       | TEXT             | Адрес гостя                       |
| `passport_no`   | VARCHAR(50)      | Номер паспорта                    |

### 2. Таблица `Rooms`
Хранит данные о номерах гостиницы.

| Поле              | Тип             | Описание                             |
|-------------------|-----------------|--------------------------------------|
| `room_id` (PK)    | INTEGER         | Уникальный идентификатор номера      |
| `room_number`     | VARCHAR(10)     | Номер комнаты                        |
| `room_type`       | VARCHAR(50)     | Тип номера (стандарт, люкс и т.д.)   |
| `capacity`        | INTEGER         | Вместимость номера                   |
| `price_per_night` | DECIMAL(10,2)   | Стоимость за ночь                    |
| `status`          | VARCHAR(20)     | Статус (свободен, занят, на ремонте) |

### 3. Таблица `Bookings`
Хранит информацию о бронированиях.

| Поле              | Тип             | Описание                              |
|-------------------|-----------------|---------------------------------------|
| `booking_id` (PK) | INTEGER         | Уникальный идентификатор бронирования |
| `guest_id` (FK)   | INTEGER         | Ссылка на гостя из таблицы `Guests`   |
| `room_id` (FK)    | INTEGER         | Ссылка на номер из таблицы `Rooms`    |
| `check_in_date`   | DATE            | Дата заезда                           |
| `check_out_date`  | DATE            | Дата выезда                           |
| `total_amount`    | DECIMAL(10,2)   | Общая сумма бронирования              |
| `payment_status`  | VARCHAR(20)     | Статус оплаты (оплачено, ожидается)   |

### 4. Таблица `Services`
Хранит данные о дополнительных услугах, предоставляемых гостям.

| Поле              | Тип             | Описание                          |
|-------------------|-----------------|-----------------------------------|
| `service_id` (PK) | INTEGER         | Уникальный идентификатор услуги   |
| `service_name`    | VARCHAR(100)    | Название услуги (прачечная, спа)  |
| `service_price`   | DECIMAL(10,2)   | Стоимость услуги                  |

### 5. Таблица `ServiceUsage`
Учет использования дополнительных услуг.

| Поле              | Тип             | Описание                                     |
|-------------------|-----------------|----------------------------------------------|
| `usage_id` (PK)   | INTEGER         | Уникальный идентификатор записи              |
| `booking_id` (FK) | INTEGER         | Ссылка на бронирование из таблицы `Bookings` |
| `service_id` (FK) | INTEGER         | Ссылка на услугу из таблицы `Services`       |
| `quantity`        | INTEGER         | Количество использованных услуг              |
| `total_cost`      | DECIMAL(10,2)   | Общая стоимость услуги                       |

### 6. Таблица `Transactions`
Учет всех финансовых транзакций.

| Поле                  | Тип             | Описание                                     |
|-----------------------|-----------------|----------------------------------------------|
| `transaction_id` (PK) | INTEGER         | Уникальный идентификатор транзакции          |
| `booking_id` (FK)     | INTEGER         | Ссылка на бронирование из таблицы `Bookings` |
| `transaction_date`    | DATE            | Дата транзакции                              |
| `amount`              | DECIMAL(10,2)   | Сумма транзакции                             |
| `payment_method`      | VARCHAR(50)     | Метод оплаты (карта, наличные и т.д.)        |

---

### Взаимосвязи между таблицами

- **Таблица `Guests`** и **Таблица `Bookings`**:
  - Один гость может иметь несколько бронирований.  
  - Связь: `guest_id` (FK) в таблице `Bookings` ссылается на `guest_id` в таблице `Guests`.

- **Таблица `Rooms`** и **Таблица `Bookings`**:
  - Один номер может быть забронирован несколько раз.  
  - Связь: `room_id` (FK) в таблице `Bookings` ссылается на `room_id` в таблице `Rooms`.

- **Таблица `Bookings`** и **Таблица `ServiceUsage`**:
  - Одно бронирование может включать несколько дополнительных услуг.  
  - Связь: `booking_id` (FK) в таблице `ServiceUsage` ссылается на `booking_id` в таблице `Bookings`.

- **Таблица `Services`** и **Таблица `ServiceUsage`**:
  - Одна услуга может быть использована в нескольких бронированиях.  
  - Связь: `service_id` (FK) в таблице `ServiceUsage` ссылается на `service_id` в таблице `Services`.

- **Таблица `Bookings`** и **Таблица `Transactions`**:
  - Одно бронирование может иметь несколько транзакций.  
  - Связь: `booking_id` (FK) в таблице `Transactions` ссылается на `booking_id` в таблице `Bookings`.

---

Эта структура базы данных поддерживает основные функции гостиницы, такие как бронирование номеров, учет гостей, управление услугами, а также учет финансовых транзакций.


**Автор:** Дуплей Максим Игоревич

**Дата:** 17.11.2024
