# Создание базы данных для театра

### Структура бд
```
+----------------+       +------------------+       +-------------------+
|     Plays      |       |     Actors       |       |       Halls       |
+----------------+       +------------------+       +-------------------+
| id             |<------| id               |       | id                |
| title          |       | name             |       | name              |
| genre          |       | patronymic       |       | capacity          |
| description    |       | surname          |       +-------------------+
| duration       |       | birth_date       |              
| age_restriction|       | experience       |
+----------------+       +------------------+
        |                         |
        |                         |
        v                         v
+------------------+    +--------------------+    +-----------------------+
|  Play_Roles      |    |   Sessions         |    |   Visitors            |
+------------------+    +--------------------+    +-----------------------+
| id               |    | id                 |    | id                    |
| play_id (FK)     |    | play_id (FK)       |    | name                  |
| role_name        |    | session_date       |    | patronymic            |
| actor_id (FK)    |    | hall_id (FK)       |    | surname               |
+------------------+    +--------------------+    | phone                 |
                        | price              |    | email                 |
                        | status             |    +-----------------------+
                        +--------------------+               |
                                   |                         |
                                   v                         v
                        +---------------------+   +-----------------------+
                        |      Tickets        |   |        Orders         |
                        +---------------------+   +-----------------------+
                        | id                  |   | id                    |
                        | session_id (FK)     |   | visitor_id (FK)       |
                        | seat_number         |   | order_date            |
                        | price               |   | total_cost            |
                        | status              |   +-----------------------+
                        +---------------------+              |
                                   |                         |
                                   v                         v
                        +----------------------+   +----------------------+
                        | Ordered_Tickets      |   |   Subscriptions      |
                        +----------------------+   +----------------------+
                        | id                   |   | id                   |
                        | order_id (FK)        |   | visitor_id (FK)      |
                        | ticket_id (FK)       |   | subscription_type    |
                        +----------------------+   | subscribed_at        |
                                  |                +----------------------+
                                  |
                                  |
                                  v
                        +--------------------+
                        |      Discounts     |
                        +--------------------+
                        | id                 |
                        | visitor_id (FK)    |
                        | discount_percentage|
                        | valid_until        |
                        +--------------------+
                                   |
                                   |
                                   v
                        +-------------------+
                        |   Play_Ratings    |
                        +-------------------+
                        | id                |
                        | play_id (FK)      |
                        | visitor_id (FK)   |
                        | rating            |
                        | review            |
                        | rated_at          |
                        +-------------------+
```

### Объяснение структуры

1. Plays - Таблица спектаклей, содержит информацию о спектаклях.
2. Actors - Таблица актеров, хранит данные о каждом актере.
3. Halls - Таблица театральных залов, хранит информацию о каждом зале.
4. Play_Roles - Таблица для назначения актеров к ролям в спектаклях.
5. Sessions - Таблица сеансов спектаклей, где указаны дата, время и зал.
6. Tickets - Таблица для билетов, связана с сеансами и хранит данные о статусе билетов.
7. Orders - Таблица заказов билетов, включает информацию о посетителях и общей стоимости.
8. Ordered_Tickets - Связующая таблица для заказанных билетов.
9. Visitors - Таблица для посетителей театра.
10. Subscriptions - Таблица подписок, позволяет управлять рассылками.
11. Discounts - Таблица скидок для лояльных посетителей.
12. Play_Ratings - Таблица оценок спектаклей с возможностью оставлять отзывы.

**Автор:** Дуплей Максим Игоревич

**Дата:** 17.11.2024
